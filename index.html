<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sojourners for Justice Press</title>
    <link rel="stylesheet" href="layout/layout.css">
</head>

<body>
    <header>
        <div class="mural">
            <div class="mural-img">
                <figure>
                    <img class="mural-img" src="layout/asset/image/mural.jpg" alt="Sojourners for Justice Press web mural" />
                </figure>
            </div>

            <div class="mural-item">
                <p id="date" class="date"></p>
                <h1 class="title"><a href="/">Sojourners for Justice Press</a></h1>
                <p class="blurb">Sojourners for Justice Press is a micro press that opens its platform to people working
                    experimentally with print based media. We publish short form and ephemeral zines, pamphlets, and
                    booklets that engage do-it-yourself, black feminist,
                    and abolitionist philosophies or visions.
                </p>
                <br>
                <nav>
                    <ul>
                        <li><a href="/about">About</a></li>
                        <li><a href="/publications">Publications</a></li>
                        <li><a href="/submissions">Submissions</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>



    <main>
        <div id="app">
            <h3 class="latest" id="latest">Latest from the Press</h3>

            <div id="latestPublications" class="latest">
                <div class="latest-item">
                   <p class="loading">I sell the shadow to support the substance</p>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer">
            <div class="footer-item">
                <ul>
                    <li> <a href="#">Email</a> </li>
                    <li> <a href="#">Issuu</a> </li>
                    <li> <a href="#">Are.na</a> </li>
                </ul>
            </div>

            <div class="footer-item">
                <p class="copyright">Creative Commons CC BY-NC-SA 4.0</p>
            </div>
        </div>
    </footer>

    <script>
        window.onload = function () {
            console.log("I sell the shadow to support the substance.")
        }

        var options = {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        };
        var today = new Date();
        document.getElementById("date").innerHTML = today.toLocaleDateString("en-US", options);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/handlebars@latest/dist/handlebars.js"></script>
    <script src="script/jquery-3.6.0.min.js"></script>
    <script src="script/publications.js"></script>
    <script>
        const latestDiv = Handlebars.compile(`
        <div class="latest-item" id="{{urlTitle}}">
        <h4><a href="javascript:void(0)" onclick="openPage('{{urlTitle}}')"><span id="title">{{publicationTitle}}</span></a></h4>
        <p>by {{author}}</p>
        <img src="publications/asset/{{img}}" alt="{{imgAltText}}"> 
        </div>
        `)
    </script>
    <script>
        loadSheetData("https://docs.google.com/spreadsheets/d/e/2PACX-1vT80dp5jy0gAKt5ZgUGh6x3AD6m2tvYif0njxSJi3zlFrEKk0Zr9pKuea5WUUBzy26lIK43QJ8h1XNg/pub?output=tsv", function (publications) {
            sheetData = publications
            console.log(publications)
            $('#latestPublications').empty()
            for (let index = 0; index < 4; index++) {
                $('#latestPublications').append(latestDiv(publications[publications.length - 1 - index]))
            }
        })
    </script>
</body>

</html>